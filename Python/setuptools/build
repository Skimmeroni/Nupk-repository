#!/bin/sh -e

PRETTY_NAME=python:setuptools
MAJOR=70
MINOR=0
PATCH=0
VERSION=70.0.0

mkdir temporary-builddir
DESTDIR=temporary-builddir

curl --location --remote-name --skip-existing https://github.com/pypa/setuptools/archive/refs/tags/v.tar.gz
gzip -cd v$VERSION.tar.gz | tar -x
cd setuptools-$VERSION

# Useful trick for boostrapping setuptools
mkdir -p "build/scripts-3.$(python -c "print(__import__('sys').version_info[1])")"

python setup.py build
python setup.py install \
	--prefix=/usr \
	--root="$DESTDIR"

su
chown -R root:root $DESTDIR
cd $DESTDIR
tar -c * | gzip > ../setuptools@$VERSION.tar.gz
exit
